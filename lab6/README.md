# Лабораторная работа 6: Разработка простого игрового движка

Структура проекта:

```
lab6/
├── src/
│   ├── main.cpp
│   ├── camera.cpp
│   ├── objects.cpp
│   ├── lighting.cpp
│   ├── utils.cpp
│   ├── render.cpp
├── include/
│   ├── camera.h
│   ├── objects.h
│   ├── lighting.h
│   ├── utils.h
│   ├── render.h
├── CMakeLists.txt
```


## Цель лабораторной работы:

В этой лабораторной работе вы будете разрабатывать основу для собственного игрового движка. Это завершающая работа, в которой вы объедините все изученные техники работы с 2D и 3D графикой, освещением, шейдерами и трассировкой лучей. В результате выполнения лабораторной работы у вас должен получиться простой движок, который может отрисовывать сцены в реальном времени, с возможностью работы с камерой, объектами и освещением.


## Основные задачи:
- [ ] Создать базовую архитектуру игрового движка с поддержкой 3D-сцен.
- [ ] Реализовать систему рендеринга с использованием изученных подходов: рендеринг через растризацию и трассировку лучей.
- [+] Настроить камеру и систему управления ею.
- [ ] Реализовать поддержку базовых игровых объектов и взаимодействие с ними.
- [ ] Обеспечить работу с несколькими типами источников света.
- [ ] Оптимизировать производительность движка (по возможности).


## [ ] Этап 1. Архитектура игрового движка

1. Создайте основную структуру движка. Включите в нее следующие компоненты:

    - Рендеринг: модуль, отвечающий за отрисовку сцен.
    - Физика (опционально): простой модуль для расчета столкновений объектов (например, сферы и плоскости).
    - Игровая логика: управление взаимодействием объектов сцены и правил игры.
    - Загрузчик файлов формата OBJ для добавления их на сцену
    - Менеджер сцены: Разработайте систему для управления игровыми сценами. 

2. Сцена должна содержать:
    - Объекты (3D-модели).
    - Источники света.
    - Камеру.

## [ ] Этап 2. Рендеринг сцены

1. Реализуйте базовый алгоритм отрисовки сцены с использованием растризации. Включите поддержку:
    - Основных 3D-примитивов (сферы, кубы, плоскости и т.д.).
    - Затенения (Flat или Gouraud shading).
    - Простого освещения: направленный источник света и точечные источники света.
    - Трассировка лучей (Ray Tracing):

2. Добавьте возможность рендеринга сцены через трассировку лучей. Это может быть отдельный режим движка. Обеспечьте:
    - Поддержку отражений и теней.
    - Простые материалы (зеркальные и матовые).
    - Реализацию хотя бы одного эффекта: преломления или каустики (опционально).

3. Напишите простые вершинные и фрагментные шейдеры для объектов сцены. Реализуйте:
    - Диффузное и зеркальное освещение.
    - Управление цветами материалов через шейдеры.


## [+] Этап 3. Работа с камерой

1. Реализуйте систему управления камерой, которая позволяет:
    - Перемещаться по сцене (WASD или стрелки).
    - Изменять угол обзора (вращение камеры мышью).
    - Масштабировать изображение (например, через колесо мыши).

2. Проекции:
    - Реализуйте возможность переключения между ортографической и перспективной проекциями для камеры.

## [ ] Этап 4. Работа с объектами и освещением

1. Игровые объекты. Реализуйте возможность добавления объектов в сцену через код или файл конфигурации. Объекты должны иметь:
    - Позицию, вращение, масштаб.
    - Взаимодействие с источниками света (освещаться).
> это будет сыр

2. Освещение. Настройте работу нескольких типов источников света:
    - Направленный свет (Directional Light): влияет на всю сцену.
    - Точечный свет (Point Light): создаёт затухающее освещение, которое зависит от расстояния до объекта.
    - Прожектор (Spotlight): освещает только определенную область сцены.

3. Тени. Добавьте поддержку теней для объектов сцены. 
    - Это могут быть простые тени для начала, например, только от одного источника света (опционально).

## [ ] Этап 5. Оптимизация и улучшение производительности
1. Уменьшение количества рендеринговых вызовов:
    - Постарайтесь уменьшить количество вызовов отрисовки для повышения производительности движка.

2. Ограничение глубины трассировки лучей:
    - Если вы используете трассировку лучей, реализуйте ограничение глубины лучей для ускорения работы.

3. Профилирование производительности:
    - Реализуйте базовое профилирование кадров (FPS) и времени рендеринга для отслеживания производительности движка.

## [ ] Этап 6. Разработка простого интерфейса
1. Игровой интерфейс:
    - Реализуйте базовый интерфейс (HUD), который показывает информацию о текущем состоянии игры, например, FPS или количество объектов в сцене.

> fps, число объектов в сцене
> настройка: включение/отключение
> количество собранного сыра. ни на что не влияет, просто сбор. упор на графику, освещение, тени.
> т.е. сцена, перемещение по сцене, сбор объектов, стены, за которые нельзя зайти. точка.
> вращение объектов. если здесь у меня вращалась камера, то как сделать, чтобы объект сам вращался? смотри лабу 3.


2. Меню настроек:
    - Сделайте меню, где можно будет изменять параметры графики (например, качество теней, включение/отключение трассировки лучей).


## [ ] Финальная задача: создание мини-игры
1. Используя созданный вами игровой движок, реализуйте простую игру. Она должна включать:
    - Сцену с несколькими объектами (например, движущиеся или статичные препятствия).
    - Управление игроком (например, от первого лица с возможностью перемещения камеры).
    - Взаимодействие с объектами (например, сбор предметов или избегание препятствий).
